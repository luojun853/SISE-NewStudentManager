# 实验报告

![](/kcsj.jpg)

> 基于所学知识有限，可能有错误的地方

- 在一些题目中要求使用文档或数据库，但是我们几乎所有操作都用了数据库，那是因为数据库对于数据处理比较方便，比较方便条件查询和追加内容（比如模块二和模块四中只要在查询数据库时加上相应的限定条件即可方便实现，又好比如在多个模块出现的按指定分数排序也用数据库方便实现，模块三的分类也是依靠数据库的条件查询）。

- 我们使用了模块化的代码功能提高代码的复用性，扩展性，易读性，尽可能用一个类只实现一个功能，使主体代码简洁，我们把所有有关数据库的代码（包括创建数据库的连接）写在了DBHelper类中，把可能要用到的数据库语句写成一个个方法，这个类中有差不多200行的代码，但是到了对应模块功能实现的类只有不到100行的代码，且看不到任何一句SQL语句，只要对应模块中的类调用相应的方法即可访问/修改数据库。这些方法如果是查询的话返回的结果都是字符串，因为我们已经在DBHelper类中写好遍历结果集的方法了，比如DBHelper中有一个studentAdd方法可以把它得到的数据添加到数据库中，模块一中就是用这个方法把新生文件中的信息导入到数据库进行分数排序的，同时在模块二中同样调用这个方法可以实现添加学生信息的功能，实现了代码复用。又比如studentQueryAll方法以字符串的形式返回查询的所有学生（除模块三）的信息的结果的，所有的文件/GUI写入/输出的内容都依靠这个方法返回的数据，使用预处理语句提高性能。

- 文件的输入输出部分我们也写了一个专门的类IOHelper，里面包含txtReader和txtWriter两个方法，txtReader只要把文件名字给它，它就可以自己从指定行数（默认第三行）开始一行一行读对应的文件，并将读到的数据用规定方式进行字符串切割，自动写入数据库中，模块一中的两个新生名单文件就是这样被读取并导入到数据库的（后面会详细说明）。txtWriter方法可以指定要写入的文件名，写入的内容，以及用布尔值决定是追加还是掩盖（true追加，false掩盖），模块一和模块三和模块二中新添加的学生信息中就是用这个方法指定对应文件后，以DBHelper中的方法为要写入的内容实现的。

- 我们在项目即将完成整合的时候遇到了头疼的乱码问题。因为每个人的电脑的环境和软件版本不一样，所以项目文件传来传去难免会出问题。我们有的人在模块一那里读取新生文件时，写入数据库和student1文件中的中文都是乱码的，后来我们修改了IOHelper中的txtReadr方法，原来我们直接创建的是字符缓存流BufferedReader出现了读取文件中文内容为乱码的情况，我们修改成了先创建字节流FileInputStream并指定UTF-8源码，再创建InputStreamReader将字节流转换成字符流，最后再建字符缓存流BufferedReader（语句            BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(new FileInputStream(file),"UTF-8"));
其中file为要读取的文件名）。
